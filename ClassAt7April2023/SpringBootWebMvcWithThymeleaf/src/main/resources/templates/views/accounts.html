<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments::head-element}"></head>
<body>
	<div class="row container m-auto">
		<div th:replace="~{fragments::header}"></div>
		<div th:replace="~{fragments::navbar}"></div>
		<div class="col-12">
			<div th:if="${msg=='AccountList'}">
				<table class="table table-striped">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Account Holders' Name</th>
							<th scope="col">Account Holders' Address</th>
							<th scope="col">Contact</th>
							<th scope="col">Citizenship No.</th>
							<th scope="col">Action</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="account : ${accounts}">
							<th scope="row" th:text="${account.id}"></th>
							<td th:text="${account.name}"></td>
							<td th:text="${account.address}"></td>
							<td th:text="${account.contact}"></td>
							<td th:text="${account.citizenship_no}"></td>
							<td>
								<a th:href="@{'accounts/update/'+${account.id}}"><button class="btn btn-small btn-warning">Update</button></a>
								<button class="btn btn-small btn-danger" th:attr="onclick=|deleteAccount('${account.id}')|">Delete</button>
							</td>
						</tr>
						
					</tbody>
				</table>
			</div>










			<div th:if="${msg=='addNewAccount'}">
				<h1>Add New Account</h1>
				<form action="new" method="post">
					<div class="mb-3">
						<label for="name" class="form-label">Customer's Name</label> <input
							type="text" name="name" class="form-control">
					</div>
					<div class="mb-3">
						<label for="address" class="form-label">Customer's Address</label>
						<input type="text" name="address" class="form-control">
					</div>
					<div class="mb-3">
						<label for="contact" class="form-label">Customer's Contact</label>
						<input type="text" name="contact" class="form-control">
					</div>
					<div class="mb-3">
						<label for="citizenship_no" class="form-label">Citizenship
							No.</label> <input type="text" name="citizenship_no" class="form-control">
					</div>

					<input type="submit" class="btn btn-primary" value="Submit">
				</form>
			</div>
			<div th:if="${msg=='accountUpdateForm'}">
				<h1>Account Update Form</h1>
				<form th:action="@{/accounts/update}" method="post">
					<input type="hidden" name="id" th:value="${account.id}">
					<div class="mb-3">
						<label for="name" class="form-label">Customer's Name</label> 
						<input type="text" name="name" class="form-control" th:value="${account.name}">
					</div>
					<div class="mb-3">
						<label for="address" class="form-label">Customer's Address</label>
						<input type="text" name="address" class="form-control" th:value="${account.address}">
					</div>
					<div class="mb-3">
						<label for="contact" class="form-label">Customer's Contact</label>
						<input type="text" name="contact" class="form-control" th:value="${account.contact}">
					</div>
					<div class="mb-3">
						<label for="citizenship_no" class="form-label">CitizenshipNo.</label> 
						<input type="text" name="citizenship_no" class="form-control" th:value="${account.citizenship_no}">
					</div>

					<input type="submit" class="btn btn-primary" value="Submit">
				</form>
			</div>
		</div>
	</div>

</body>

<script type="text/javascript">
	function deleteAccount(id){
		console.log(id);
		let confirm = window.confirm("Confirm Delete account (id: "+id+")?");
		console.log(confirm);
		if(confirm){
			window.location.replace("/accounts/delete/"+id);
		}
	}
</script>
</html>